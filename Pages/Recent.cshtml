@page
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
@model RecentModel
@{
    ViewData["Title"] = "Ostatnio Szukane";
}

@if(Model.Records?.Count>0)
{
    <table class="table table-hover">
        <thead class="thead-dark">
            <tr>
                <th>Podana liczba</th>
                <th>Odpowiedź</th>
                <th>Data</th>
                <th>Usuwanie</th>
                <th>Właściciel</th>
            </tr>
        </thead>
        @for(int i=0;i<Model.Records.Count;i++)
        {
            <tbody class="table-hover">
                <tr>
                    <td>@Model.Records[i].Number</td>
                    <td>@Model.Records[i].Result</td>
                    <td>@Model.Records[i].Time</td>
                    <td>
                        <form id="deleteForm@(i)" method="POST">
                            <input type="hidden" asp-for="rowID" value="@Model.Records[i].ID"/>
                            <a href="#" onclick="javascript:$('#deleteForm@(i)').submit()">Usuń rekord</a>
                        </form>
                    </td>
                    <td>@UserManager.FindByIdAsync(Model.Records[i].RecordUserId).Result.UserName</td>

                </tr>
            </tbody>
        }
        
    </table>

}
else
{
    <h1>Brak wyników</h1>
}
